{"version":3,"file":"component---src-pages-resources-ci-cd-lesson-1-md-18c99dd959a3fecb4ba1.js","mappings":"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","sources":["webpack://adobe-developer-app-builder/./src/pages/resources/ci-cd/lesson1.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/adobe-developer-app-builder/adobe-developer-app-builder/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1>{`Lesson 1: Setup CI/CD`}</h1>\n    <p>{`App Builder comes with pre-defined GitHub actions to manage your CI/CD workflow. `}<strong parentName=\"p\">{`GitHub actions can only work once the App Builder app and the corresponding GitHub actions are committed to a GitHub repository.`}</strong></p>\n    <h2 {...{\n      \"id\": \"setup-your-github-repository-for-your-app-builder-app\"\n    }}>{`Setup your GitHub repository for your App Builder App`}</h2>\n    <p>{`To put your App Builder App up on GitHub, you'll need to create a repository for it to live in. You can follow these `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/github/getting-started-with-github/create-a-repo\"\n      }}>{`steps`}</a>{` to create an empty repository.\nOnce your repository is available on GitHub, you can copy your repository url e.g. `}<inlineCode parentName=\"p\">{`https://github.com/<org>/<project_name>.git`}</inlineCode>{`.`}</p>\n    <p>{`Then in the command line, use `}<inlineCode parentName=\"p\">{`git clone https://github.com/<org>/<project_name>.git`}</inlineCode>{` to clone the repository to your local system.`}</p>\n    <p>{`Go to the project folder with `}<inlineCode parentName=\"p\">{`cd <project_name>`}</inlineCode>{` and run the command `}<inlineCode parentName=\"p\">{`aio app init`}</inlineCode>{` to bootstrap a new App Builder Application from the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/adobe/aio-cli\"\n      }}>{`CLI`}</a>{`, the application generator will ask whether to include GitHub Actions based workflows for Build, Test and Deploy.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"18.125%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/5530d/bootstrap.webp 320w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/0c8fb/bootstrap.webp 640w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/94b1e/bootstrap.webp 1280w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/617b0/bootstrap.webp 1384w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/dd4a7/bootstrap.png 320w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/0f09e/bootstrap.png 640w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/bbbf7/bootstrap.png 1280w\", \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/622c8/bootstrap.png 1384w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/adobe-developer-app-builder/static/ce95ac917b3bdad69bccb0f3a268016a/bbbf7/bootstrap.png\",\n            \"alt\": \"bootstrap\",\n            \"title\": \"bootstrap\",\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <h2 {...{\n      \"id\": \"github-actions\"\n    }}>{`GitHub actions`}</h2>\n    <p>{`The CI/CD workflow relies on Adobe I/O GitHub Actions published on the GitHub Marketplace:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`adobe/aio-cli-setup-action`}</inlineCode>{` used to install and configure the `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/adobe/aio-cli\"\n        }}>{`CLI`}</a>{` on the GitHub infrastructure running the workflow that invoked the action. See `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/marketplace/actions/aio-cli-setup\"\n        }}>{`CLI Setup`}</a>{`.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`adobe/aio-apps-action`}</inlineCode>{` used to centralize the support for a GitHub workflow to leverage several application specific commands, such as testing via `}<inlineCode parentName=\"li\">{`aio app test`}</inlineCode>{` and deployment via `}<inlineCode parentName=\"li\">{`aio app deploy`}</inlineCode>{`. See `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/adobe/aio-apps-action\"\n        }}>{`Apps`}</a>{`.                                                                              `}</li>\n    </ul>\n    <p>{`By selecting the CI/CD workflow option, the application code will be initialized with an additional `}<inlineCode parentName=\"p\">{`.github`}</inlineCode>{` folder at its root. `}</p>\n    <p>{`This folder contains default GitHub Workflows that can be customized and extended if needed. `}</p>\n    <p><strong parentName=\"p\">{`pr_test.yml`}</strong>{` is the GitHub action that will run the App unit tests on the stage environment by calling `}<inlineCode parentName=\"p\">{`aio app test`}</inlineCode>{` against the requested changes. It will run anytime the `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/reference/events-that-trigger-workflows#pull-request-event-pull_request\"\n      }}>{`pull_request`}</a>{` event occurs.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`name: AIO App CI\n\non: [pull_request]\njobs:\n  test:\n    name: Test PR\n    runs-on: \\${{ matrix.os }}\n    strategy:\n      matrix:\n        node-version: ['14']\n        os: [macOS-latest, ubuntu-latest, windows-latest]\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Use Node.js \\${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: \\${{ matrix.node-version }}\n      - name: npm install\n        run: npm i\n      - name: Setup CLI\n        uses: adobe/aio-cli-setup-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n      - name: Build\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: build\n          AIO_RUNTIME_NAMESPACE: \\${{ secrets.AIO_RUNTIME_NAMESPACE_STAGE }}\n      - name: Test\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: test\n`}</code></pre>\n    <p><strong parentName=\"p\">{`deploy_stage.yml`}</strong>{` is the GitHub action that will deploy the App Builder App to the stage environment on every new commit on the `}<inlineCode parentName=\"p\">{`master`}</inlineCode>{` branch by calling `}<inlineCode parentName=\"p\">{`aio app deploy`}</inlineCode>{`.\nIt will run anytime the `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/reference/events-that-trigger-workflows#push-event-push\"\n      }}>{`push`}</a>{` event occurs on the `}<inlineCode parentName=\"p\">{`master`}</inlineCode>{` branch. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`name: AIO App CI\n\non:\n  push:\n    branches:\n      - master\njobs:\n  deploy:\n    name: Deploy to Stage\n    runs-on: \\${{ matrix.os }}\n    strategy:\n      max-parallel: 1\n      matrix:\n        node-version: ['14']\n        os: [ubuntu-latest]\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Use Node.js \\${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: \\${{ matrix.node-version }}\n      - name: npm install\n        run: npm i\n      - name: Setup CLI\n        uses: adobe/aio-cli-setup-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n      - name: Build\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: build\n          AIO_RUNTIME_NAMESPACE: \\${{ secrets.AIO_RUNTIME_NAMESPACE_STAGE }}\n      - name: Deploy\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: deploy\n          AIO_RUNTIME_AUTH: \\${{ secrets.AIO_RUNTIME_AUTH_STAGE }}\n          AIO_RUNTIME_NAMESPACE: \\${{ secrets.AIO_RUNTIME_NAMESPACE_STAGE }}\n`}</code></pre>\n    <p><strong parentName=\"p\">{`deploy_prod.yml`}</strong>{` is the GitHub action that will deploy the App Builder App to the production environment by calling `}<inlineCode parentName=\"p\">{`aio app deploy`}</inlineCode>{`. It will run anytime the `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/reference/events-that-trigger-workflows#release-event-release\"\n      }}>{`release`}</a>{` event occurs. Please read `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/github/administering-a-repository/managing-releases-in-a-repository\"\n      }}>{`GitHub's documentation `}</a>{` to learn how to perform releases. `}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`name: AIO App CI\n\non:\n  release:\n    types: [published]\njobs:\n  deploy:\n    name: Deploy to Prod\n    runs-on: \\${{ matrix.os }}\n    strategy:\n      max-parallel: 1\n      matrix:\n        node-version: ['14']\n        os: [ubuntu-latest]\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      - name: Use Node.js \\${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: \\${{ matrix.node-version }}\n      - name: npm install\n        run: npm i\n      - name: Setup CLI\n        uses: adobe/aio-cli-setup-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n      - name: Build\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: build\n          AIO_RUNTIME_NAMESPACE: \\${{ secrets.AIO_RUNTIME_NAMESPACE_PROD }}\n      - name: Deploy\n        uses: adobe/aio-apps-action@1.0.0\n        with:\n          os: \\${{ matrix.os }}\n          command: deploy\n          AIO_RUNTIME_AUTH: \\${{ secrets.AIO_RUNTIME_AUTH_PROD }}\n          AIO_RUNTIME_NAMESPACE: \\${{ secrets.AIO_RUNTIME_NAMESPACE_PROD }} \n`}</code></pre>\n    <p>{`The back-end serverless actions get deployed to Runtime, while the SPA gets deployed to the out-of-the-box CDN for every deployment whether to stage or production.    `}</p>\n    <p>{`For that, we'll push the project on GitHub with `}<inlineCode parentName=\"p\">{`git commit \"Initial commit\" && git push origin master`}</inlineCode>{` which will commit the App Builder App to the `}<inlineCode parentName=\"p\">{`master`}</inlineCode>{` branch of the GitHub repository.`}</p>\n    <p>{`The GitHub actions defined in `}<inlineCode parentName=\"p\">{`deploy_stage.yml`}</inlineCode>{` will run by default. Go to `}<inlineCode parentName=\"p\">{`https://github.com/<org>/<project_name>/actions`}</inlineCode>{` to see the workflow running:`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"24.375000000000004%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/5530d/workflow-failure.webp 320w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/0c8fb/workflow-failure.webp 640w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/94b1e/workflow-failure.webp 1280w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/0b34d/workflow-failure.webp 1920w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/d5269/workflow-failure.webp 2560w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/1c319/workflow-failure.webp 2684w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/dd4a7/workflow-failure.png 320w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/0f09e/workflow-failure.png 640w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/bbbf7/workflow-failure.png 1280w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/ac7a9/workflow-failure.png 1920w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/c7a69/workflow-failure.png 2560w\", \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/8ac3b/workflow-failure.png 2684w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/adobe-developer-app-builder/static/9817a440d7eceb370f033a8f746dd89b/bbbf7/workflow-failure.png\",\n            \"alt\": \"workflow-failure\",\n            \"title\": \"workflow-failure\",\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p><strong parentName=\"p\">{`By default, the workflow will fail as we didn't specify the GitHub secrets yet.`}</strong></p>\n    <h2 {...{\n      \"id\": \"github-secrets\"\n    }}>{`GitHub secrets`}</h2>\n    <p>{`To differentiate stage from production, the GitHub actions rely on `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets\"\n      }}>{`GitHub secrets`}</a>{`.\nEncrypted secrets allow you to store sensitive information, such as access tokens, in your repository. `}</p>\n    <p>{`By default, the secrets required for `}<inlineCode parentName=\"p\">{`deploy_prod.yml`}</inlineCode>{` for the `}<strong parentName=\"p\">{`production environment`}</strong>{` are named: `}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`AIO_RUNTIME_NAMESPACE_PROD`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`AIO_RUNTIME_AUTH_PROD`}</inlineCode></li>\n    </ul>\n    <p>{`And the secrets required for `}<inlineCode parentName=\"p\">{`deploy_stage.yml`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`pr_test.yml`}</inlineCode>{` for the `}<strong parentName=\"p\">{`stage environment`}</strong>{` are named: `}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`AIO_RUNTIME_NAMESPACE_STAGE`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`AIO_RUNTIME_AUTH_STAGE`}</inlineCode></li>\n    </ul>\n    <p>{`To add a secret to your project:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to `}<inlineCode parentName=\"li\">{`https://github.com/<org>/<project_name>/settings/secrets`}</inlineCode></li>\n      <li parentName=\"ol\">{`Type the name of your secret e.g. `}<inlineCode parentName=\"li\">{`AIO_RUNTIME_NAMESPACE_PROD`}</inlineCode>{` in the \"Name\" input box.`}</li>\n      <li parentName=\"ol\">{`Type the value for your secret. `}</li>\n    </ol>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"59.06250000000001%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/5530d/secrets.webp 320w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/0c8fb/secrets.webp 640w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/94b1e/secrets.webp 1280w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/0b34d/secrets.webp 1920w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/abe75/secrets.webp 2020w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/dd4a7/secrets.png 320w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/0f09e/secrets.png 640w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/bbbf7/secrets.png 1280w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/ac7a9/secrets.png 1920w\", \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/f27d7/secrets.png 2020w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/adobe-developer-app-builder/static/5e1c03d74d39c30b42e6bbcead6f78a9/bbbf7/secrets.png\",\n            \"alt\": \"secrets\",\n            \"title\": \"secrets\",\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`If you can't add secrets to the repository, the reason could be that:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`You're not the repository owner if the repository is a user account repository.`}</li>\n      <li parentName=\"ul\">{`You don't have admin access for an organization repository.`}</li>\n      <li parentName=\"ul\">{`You don't have write access to the repository if you're using the `}<a parentName=\"li\" {...{\n          \"href\": \"https://developer.github.com/v3/actions/secrets/#create-or-update-a-secret-for-a-repository\"\n        }}>{`GitHub Actions secrets API`}</a></li>\n    </ul>\n    <p><strong parentName=\"p\">{`The secrets value can be retrieved in the `}<a parentName=\"strong\" {...{\n          \"href\": \"https://console.adobe.io/\"\n        }}>{`Developer Console`}</a></strong>{` from where you can download the stage and production namespace and credential.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"1280px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"39.0625%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/5530d/developer-console.webp 320w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/0c8fb/developer-console.webp 640w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/94b1e/developer-console.webp 1280w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/0b34d/developer-console.webp 1920w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/c0666/developer-console.webp 2004w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/dd4a7/developer-console.png 320w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/0f09e/developer-console.png 640w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/bbbf7/developer-console.png 1280w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/ac7a9/developer-console.png 1920w\", \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/3a775/developer-console.png 2004w\"],\n            \"sizes\": \"(max-width: 1280px) 100vw, 1280px\",\n            \"type\": \"image/png\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/adobe-developer-app-builder/static/869e85e4cd863840a5b5d3b7eb96a315/bbbf7/developer-console.png\",\n            \"alt\": \"developer-console\",\n            \"title\": \"developer-console\",\n            \"loading\": \"lazy\",\n            \"decoding\": \"async\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span>{`  `}</p>\n    <p>{`Follow these steps to retrieve the value for the secrets `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_NAMESPACE_STAGE`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_AUTH_STAGE`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_NAMESPACE_PROD`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_AUTH_PRD`}</inlineCode>{`: `}</p>\n    <ol>\n      <li parentName=\"ol\">{`Go to the `}<a parentName=\"li\" {...{\n          \"href\": \"https://console.adobe.io/\"\n        }}>{`Developer Console`}</a></li>\n      <li parentName=\"ol\">{`Select the right org, project and workspace. `}</li>\n      <li parentName=\"ol\">{`Click on the Download all button on the top right. `}</li>\n    </ol>\n    <p>{`This will download a `}<inlineCode parentName=\"p\">{`json`}</inlineCode>{` file like the following:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n    \"project\": {\n        \"id\": \"...\",\n        \"name\": \"...\",\n        \"title\": \"...\",\n        \"org\": {\n            \"id\": \"...\",\n            \"name\": \"...\",\n            \"ims_org_id\": \"...\"\n        },\n        \"workspace\": {\n            \"id\": \"...\",\n            \"name\": \"...\",\n            \"title\": \"...\",\n            \"description\": \"...\",\n            \"action_url\": \"...\",\n            \"app_url\": \"...\",\n            \"details\": {\n                \"credentials\": [],\n                \"services\": [],\n                \"runtime\": {\n                    \"namespaces\": [\n                        {\n                            \"name\": AIO_RUNTIME_NAMESPACE_VALUE,\n                            \"auth\": AIO_RUNTIME_AUTH_VALUE\n                        }\n                    ]\n                }\n            }\n        }\n    }\n}\n`}</code></pre>\n    <p>{`Now you can copy the value of `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_NAMESPACE_VALUE`}</inlineCode>{` and to `}<inlineCode parentName=\"p\">{`AIO_RUNTIME_AUTH_VALUE`}</inlineCode>{` to your GitHub secrets.\nSimply repeat the steps for your stage / production workspace. `}</p>\n    <p><strong parentName=\"p\">{`Alternatively you can also use the CLI to retrieve these values.`}</strong>{` `}</p>\n    <p>{`Simply run the following commands:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`aio where // Shows you where your CLI config points to in terms of org/project/workspace\n\naio console org list // List which org you can work with\naio console org select <orgId> // Select the org you want to work with\n\naio console project list // List which project you can work with\naio console project select <projectid> // Select the project you want to work with\n\naio console workspace list // List which workspace you can work with\naio console workspace select <wkspId> // Select the workspace you want to work with\n\naio app use -m // Merge the selected environment settings from the Developer Console into the current working environment.  \n`}</code></pre>\n    <p>{`Then go to the `}<inlineCode parentName=\"p\">{`.env`}</inlineCode>{` file in your project and copy the values of `}<inlineCode parentName=\"p\">{`AIO_runtime_namespace`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`AIO_runtime_auth`}</inlineCode>{` into your GitHub secrets.\nSimply repeat the steps for stage / production by switching to another workspace with `}<inlineCode parentName=\"p\">{`aio console workspace select <wkspId>`}</inlineCode>{`.   `}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}