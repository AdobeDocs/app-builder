"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[9523],{42187:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return s}});var i=a(58168),n=a(80045),o=(a(88763),a(15680)),p=a(83407);const r=["components"],l={},c={_frontmatter:l},d=p.A;function s(e){let{components:t}=e,a=(0,n.A)(e,r);return(0,o.mdx)(d,(0,i.A)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"cicd-for-app-builder-applications"},"CI/CD for App Builder Applications"),(0,o.mdx)("p",null,"Continuous integration and continuous delivery (CI/CD) is a crucial component for the success of any development team, including one on App Builder applications. By automating deployment, CI/CD allows the development team to focus on requirements, code quality, and security; it is one of the best practices for teams to implement, and for us to support. "),(0,o.mdx)("p",null,"App Builder allows you to manage multiple environments through Workspace in Adobe Developer Console. Every new application project created by an entitled organization Administrator or Developer in the Console will be set up with two named workspaces, Stage and Production, and each workspace will have its own setup with:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Adobe services to integrate through user or technical user accounts"),(0,o.mdx)("li",{parentName:"ul"},"Runtime namespace"),(0,o.mdx)("li",{parentName:"ul"},"Cloud storage for the Single-Page Application static files "),(0,o.mdx)("li",{parentName:"ul"},"CDN delegation and sub-domain provisioned on ",(0,o.mdx)("inlineCode",{parentName:"li"},"adobeio-static.net")),(0,o.mdx)("li",{parentName:"ul"},"Related credentials and secrets, including API Key, access token, and Runtime namespace credentials")),(0,o.mdx)("p",null,"Users at entitled organizations will also be allowed to create as many additional workspaces as their project requires, whether to add extra stages (QA, Preproduction, etc.), to match infrastructure requirements, or to define Developer-specific workspaces for each team member to work against locally."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"51.87500000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/e780bade413b605c23cef35b562181ba/5530d/high-level-ci-cd-architecture.webp 320w","/app-builder/static/e780bade413b605c23cef35b562181ba/0c8fb/high-level-ci-cd-architecture.webp 640w","/app-builder/static/e780bade413b605c23cef35b562181ba/94b1e/high-level-ci-cd-architecture.webp 1280w","/app-builder/static/e780bade413b605c23cef35b562181ba/0b34d/high-level-ci-cd-architecture.webp 1920w","/app-builder/static/e780bade413b605c23cef35b562181ba/d5269/high-level-ci-cd-architecture.webp 2560w","/app-builder/static/e780bade413b605c23cef35b562181ba/a5b37/high-level-ci-cd-architecture.webp 3320w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/e780bade413b605c23cef35b562181ba/dd4a7/high-level-ci-cd-architecture.png 320w","/app-builder/static/e780bade413b605c23cef35b562181ba/0f09e/high-level-ci-cd-architecture.png 640w","/app-builder/static/e780bade413b605c23cef35b562181ba/bbbf7/high-level-ci-cd-architecture.png 1280w","/app-builder/static/e780bade413b605c23cef35b562181ba/ac7a9/high-level-ci-cd-architecture.png 1920w","/app-builder/static/e780bade413b605c23cef35b562181ba/c7a69/high-level-ci-cd-architecture.png 2560w","/app-builder/static/e780bade413b605c23cef35b562181ba/353b7/high-level-ci-cd-architecture.png 3320w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/app-builder/static/e780bade413b605c23cef35b562181ba/bbbf7/high-level-ci-cd-architecture.png",alt:"High-Level CI/CD architecture",title:"High-Level CI/CD architecture",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("h2",{id:"local-application-development"},"Local application development"),(0,o.mdx)("p",null,"A project might have several Developers working on the same application code. They may clone the code from the same branch, or create different branches for new features, but deployments should differ so they don't interfere with one another. Each Developer can then use individual workspaces as described above to create their own deployments. "),(0,o.mdx)("p",null,"Prerequisites are application code cloned to the local machine and the workspace configuration JSON file downloaded from Adobe Developer Console. Once those conditions are met, navigate in the terminal to the home directory of the application code and run:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app use path/to/workspace.json\n")),(0,o.mdx)("p",null,"Check to see that the workspace is set up for the app by verifying the ",(0,o.mdx)("inlineCode",{parentName:"p"},".aio")," and ",(0,o.mdx)("inlineCode",{parentName:"p"},".env")," files, which contain the target workspace details."),(0,o.mdx)("h2",{id:"github-actions-support"},"GitHub actions support"),(0,o.mdx)("p",null,"A sample CI/CD workflow is included With App Builder on top of ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/features/actions"},"GitHub Actions"),".\nWhen a new App Builder application is bootstrapped from the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI")," using the ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app init")," command, the application generator asks the Developer whether to ",(0,o.mdx)("inlineCode",{parentName:"p"},"include GitHub Actions based workflows for Build, Test and Deploy"),"."),(0,o.mdx)("p",null,"If the Developer selects this option, the application code will be initialized with an additional ",(0,o.mdx)("inlineCode",{parentName:"p"},".github")," folder at its root. This folder contains default ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app/tree/master/generators/add-ci/.github/workflows"},"GitHub Workflows")," that can be extended at the application level depending on the Developer's needs."),(0,o.mdx)("h3",{id:"github-workflows"},"Github workflows"),(0,o.mdx)("p",null,"The default GitHub workflows support the following actions, based on the Github events triggered on the application repository:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},"On ",(0,o.mdx)("inlineCode",{parentName:"p"},"Pull Request"),", the application unit tests are executed by calling ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app test")," against the requested changes. See the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app/blob/master/generators/add-ci/.github/workflows/pr_test.yml"},"PR workflow"),".")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},"On ",(0,o.mdx)("inlineCode",{parentName:"p"},"Branch Merge"),", the application is deployed to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Stage")," workspace by calling ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app deploy"),". Back-end serverless actions are deployed to Runtime, and the SPA gets to the CDN if the application has a web UI. See the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app/blob/master/generators/add-ci/.github/workflows/deploy_stage.yml"},"Deploy Stage workflow"),".")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},"On ",(0,o.mdx)("inlineCode",{parentName:"p"},"Repository Release"),", the application is deployed to the ",(0,o.mdx)("inlineCode",{parentName:"p"},"Production")," workspace by calling ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app deploy"),". The back-end serverless actions are deployed to Runtime, and the SPA to the CDN if the application has a web UI. See the ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app/blob/master/generators/add-ci/.github/workflows/deploy_prod.yml"},"Deploy Prod workflow"),"."))),(0,o.mdx)("p",null,"Each of the default Github Workflows uses two core features provided by Github: ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/features/actions"},"Github Actions")," and ",(0,o.mdx)("a",{parentName:"p",href:"https://help.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets"},"Github Secrets"),"."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"57.50000000000001%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/f1f5047e686220730b1199a6edb973bf/5530d/ci-cd-github-actions-architecture.webp 320w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/0c8fb/ci-cd-github-actions-architecture.webp 640w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/94b1e/ci-cd-github-actions-architecture.webp 1280w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/0b34d/ci-cd-github-actions-architecture.webp 1920w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/d5269/ci-cd-github-actions-architecture.webp 2560w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/b67dc/ci-cd-github-actions-architecture.webp 2964w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/f1f5047e686220730b1199a6edb973bf/dd4a7/ci-cd-github-actions-architecture.png 320w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/0f09e/ci-cd-github-actions-architecture.png 640w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/bbbf7/ci-cd-github-actions-architecture.png 1280w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/ac7a9/ci-cd-github-actions-architecture.png 1920w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/c7a69/ci-cd-github-actions-architecture.png 2560w","/app-builder/static/f1f5047e686220730b1199a6edb973bf/a8ddb/ci-cd-github-actions-architecture.png 2964w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/app-builder/static/f1f5047e686220730b1199a6edb973bf/bbbf7/ci-cd-github-actions-architecture.png",alt:"CI/CD with Github Actions",title:"CI/CD with Github Actions",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("h3",{id:"github-actions-for-aio-cli"},"GitHub actions for AIO CLI"),(0,o.mdx)("p",null,"These GitHub Actions have been built to support the use of the CLI in a CI/CD workflow running within GitHub infrastructure. They are used in the default ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app/tree/master/generators/add-ci/.github/workflows"},"App Builder Apps workflows"),", and can also be used in custom GitHub workflows built by Developers to fulfil project needs:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli-setup-action"},"CLI Setup Action")," can be used to install and configure the CLI on the GitHub infrastructure running the workflow that invoked the action")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-apps-action"},"Apps Action")," centralizes support for a GitHub workflow to use application-specific commands such as testing using ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app test")," and deployment using ",(0,o.mdx)("inlineCode",{parentName:"p"},"aio app deploy"),"."))),(0,o.mdx)("p",null,"Both actions have been published and can be found on GitHub Marketplace. See ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/marketplace/actions/aio-cli-setup"},"CLI Setup")," and ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/marketplace/actions/aio-apps"},"Apps"),"."),(0,o.mdx)("h3",{id:"github-secrets"},"GitHub secrets"),(0,o.mdx)("p",null,"The following GitHub Actions use GitHub Secrets to store environment-specific secrets. Currently, an Administrator must add these secrets to the application repository manually:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"AIO_RUNTIME_NAMESPACE_STAGE"),", the name of the Runtime namespace associated with the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Stage")," App Builder workspace"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"AIO_RUNTIME_AUTH_STAGE"),", credentials for the Runtime namespace associated with the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Stage")," App Builder workspace"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"AIO_RUNTIME_NAMESPACE_PROD"),", the name of the Runtime namespace associated with the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Prod")," App Builder workspace"),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"AIO_RUNTIME_AUTH_PROD"),", the credentials for the Runtime namespace associated with the ",(0,o.mdx)("inlineCode",{parentName:"li"},"Prod")," App Builder workspace")),(0,o.mdx)("p",null,"We plan to simplify this configuration process in the future. "),(0,o.mdx)("h2",{id:"bring-your-own-cicd-pipeline"},"Bring your own CI/CD pipeline"),(0,o.mdx)("p",null,"The default implementation of the CI/CD workflow for App Builder Applications relies on GitHub capabilities. However, Developers might need an alternative solution due to project requirements or team preferences. If so, we recommend that the custom solution focus on:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"The CLI, the official tool to manage the development lifecycle of App Builder applications from bootstrapping to deployment. It can be used within CI/CD workflows for automation purposes."),(0,o.mdx)("li",{parentName:"ul"},"Security, a key requirement: any alternative CI/CD workflow should include a solid secret-management solution to store credentials needed to deploy an App Builder Application against a specific workspace.")),(0,o.mdx)("h2",{id:"next-steps"},"Next steps"),(0,o.mdx)("p",null,"Continue to ",(0,o.mdx)("a",{parentName:"p",href:"credential_rotation.md"},"Credential Rotation"),"."),(0,o.mdx)("p",null,"Return to ",(0,o.mdx)("a",{parentName:"p",href:"deployment.md"},"Deployment Overview"),"."),(0,o.mdx)("p",null,"Return to the ",(0,o.mdx)("a",{parentName:"p",href:"../../index.md"},"Guides Index"),"."))}s.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-builder-guides-deployment-cicd-for-app-builder-apps-md-84e3597652ed41bd6046.js.map