"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[1727],{68043:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return i},default:function(){return u}});var o=t(58168),a=t(80045),p=(t(88763),t(15680)),r=t(83407);const l=["components"],i={},m={_frontmatter:i},d=r.A;function u(e){let{components:n}=e,t=(0,a.A)(e,l);return(0,p.mdx)(d,(0,o.A)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,p.mdx)("h1",{id:"forwarding-logs-to-splunk-cloud"},"Forwarding Logs to Splunk Cloud"),(0,p.mdx)("p",null,"This guide covers configuring App Builder to forward application logs to a Splunk Cloud account. "),(0,p.mdx)("h2",{id:"prerequisites"},"Prerequisites"),(0,p.mdx)("ul",null,(0,p.mdx)("li",{parentName:"ul"},"An index on your Splunk Cloud account. Create a new index following ",(0,p.mdx)("a",{parentName:"li",href:"https://docs.splunk.com/Documentation/Splunk/8.2.4/Indexer/Setupmultipleindexes"},"Splunk's guide")),(0,p.mdx)("li",{parentName:"ul"},"Local development setup for your App Builder application"),(0,p.mdx)("li",{parentName:"ul"},"The latest version of AIO CLI. Check by running ",(0,p.mdx)("inlineCode",{parentName:"li"},"aio --version"),"; update by running ",(0,p.mdx)("inlineCode",{parentName:"li"},"npm install -g @adobe/aio-cli"))),(0,p.mdx)("h2",{id:"steps-to-configure-log-forwarding"},"Steps to configure log forwarding"),(0,p.mdx)("h3",{id:"1-set-up-splunk-http-event-collector"},"1. Set up Splunk HTTP event collector"),(0,p.mdx)("ol",null,(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"On your Splunk Cloud account homepage, select ",(0,p.mdx)("inlineCode",{parentName:"p"},"Settings")," from the ribbon and ",(0,p.mdx)("inlineCode",{parentName:"p"},"Data Inputs")," on the ",(0,p.mdx)("em",{parentName:"p"},"Settings")," pane")),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Click the ",(0,p.mdx)("inlineCode",{parentName:"p"},"+ Add New")," button corresponding to the HTTP Event Collector input type")),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"On the ",(0,p.mdx)("em",{parentName:"p"},"Select Source")," screen:"),(0,p.mdx)("ul",{parentName:"li"},(0,p.mdx)("li",{parentName:"ul"},"Type in an input name, for example: ",(0,p.mdx)("inlineCode",{parentName:"li"},"My App Builder Application")," "),(0,p.mdx)("li",{parentName:"ul"},"Make sure the ",(0,p.mdx)("inlineCode",{parentName:"li"},"Enable Indexer Acknowledgment")," checkbox is ",(0,p.mdx)("strong",{parentName:"li"},"not")," ticked"),(0,p.mdx)("li",{parentName:"ul"},"Click the ",(0,p.mdx)("inlineCode",{parentName:"li"},"Next")," button on top"))),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"On the ",(0,p.mdx)("em",{parentName:"p"},"Input Settings")," screen:"),(0,p.mdx)("ul",{parentName:"li"},(0,p.mdx)("li",{parentName:"ul"},"Set the source type to ",(0,p.mdx)("inlineCode",{parentName:"li"},"automatic"),". Forwarded logs will be sent with the ",(0,p.mdx)("inlineCode",{parentName:"li"},"sourcetype")," field set to ",(0,p.mdx)("inlineCode",{parentName:"li"},"_json")),(0,p.mdx)("li",{parentName:"ul"},"From the list of indexes, select only the index on which you wish to receive logs from your App Builder application"),(0,p.mdx)("li",{parentName:"ul"},"Click the ",(0,p.mdx)("inlineCode",{parentName:"li"},"Review")," button on top."))),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"On the ",(0,p.mdx)("em",{parentName:"p"},"Done")," screen:"),(0,p.mdx)("ul",{parentName:"li"},(0,p.mdx)("li",{parentName:"ul"},"Copy the token value for later use.")))),(0,p.mdx)("h3",{id:"2-get-your-splunk-hostname-and-port"},"2. Get your Splunk hostname and port"),(0,p.mdx)("ol",null,(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"To find your ",(0,p.mdx)("inlineCode",{parentName:"p"},"hostname")," and ",(0,p.mdx)("inlineCode",{parentName:"p"},"port")," number, follow the procedures in ",(0,p.mdx)("a",{parentName:"p",href:"https://docs.splunk.com/Documentation/Splunk/8.2.4/Data/UsetheHTTPEventCollector#Send_data_to_HTTP_Event_Collector_on_Splunk_Cloud_Platform"},"Send Data to HTTP Event Collector on Splunk Cloud Platform")," from Splunk documentation. ")),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Confirm your  ",(0,p.mdx)("inlineCode",{parentName:"p"},"hostname")," and ",(0,p.mdx)("inlineCode",{parentName:"p"},"port")," number by executing this cURL request, using the token saved when you set up the Splunk HTTP event collector:"),(0,p.mdx)("pre",{parentName:"li"},(0,p.mdx)("code",{parentName:"pre"},'curl -X POST \'https://<hostname>:<port>/services/collector\' \\     \n-H "Authorization: Splunk <token>" \\\n-d \'{"event": "hello world"}\'\n')),(0,p.mdx)("p",{parentName:"li"},"A ",(0,p.mdx)("inlineCode",{parentName:"p"},"200 OK")," response confirms your ",(0,p.mdx)("inlineCode",{parentName:"p"},"hostname")," and ",(0,p.mdx)("inlineCode",{parentName:"p"},"port"),". Note that I/O Runtime supports only ports ",(0,p.mdx)("inlineCode",{parentName:"p"},"443")," and ",(0,p.mdx)("inlineCode",{parentName:"p"},"8088")," for port forwarding."))),(0,p.mdx)("h3",{id:"3-set-up-log-forwarding-in-app-builder"},"3. Set up log forwarding in App Builder"),(0,p.mdx)("ol",null,(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Open Terminal and navigate to the App Builder project directory on your local machine.")),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Run this command, supplying the values from previous steps:"),(0,p.mdx)("pre",{parentName:"li"},(0,p.mdx)("code",{parentName:"pre"},"aio app config set log-forwarding\n? select log forwarding destination: Splunk HEC\n? host: <hostname>\n? port: <port_number>\n? index: <index>\n? hec_token: <token>\n")),(0,p.mdx)("p",{parentName:"li"},"Note:"),(0,p.mdx)("ul",{parentName:"li"},(0,p.mdx)("li",{parentName:"ul"},"Be sure not to prefix the protocol (",(0,p.mdx)("inlineCode",{parentName:"li"},"http://")," or ",(0,p.mdx)("inlineCode",{parentName:"li"},"https://"),") before the hostname"),(0,p.mdx)("li",{parentName:"ul"},"Use the ",(0,p.mdx)("inlineCode",{parentName:"li"},"hostname")," and ",(0,p.mdx)("inlineCode",{parentName:"li"},"port"),' as determined in "Getting Splunk host and port" above '),(0,p.mdx)("li",{parentName:"ul"},"Use the ",(0,p.mdx)("inlineCode",{parentName:"li"},"token")," value token saved when you set up the Splunk HTTP event collector"))),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Verify that the configuration change has taken place: "))),(0,p.mdx)("pre",null,(0,p.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding\n")),(0,p.mdx)("ol",{start:4},(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Execute an action in your App Builder application workspace to generate logs.")),(0,p.mdx)("li",{parentName:"ol"},(0,p.mdx)("p",{parentName:"li"},"Go to Splunk Home > Search and run the query:"))),(0,p.mdx)("pre",null,(0,p.mdx)("code",{parentName:"pre"},"index=<index>\n")),(0,p.mdx)("ol",{start:6},(0,p.mdx)("li",{parentName:"ol"},"If you don't see any logs in Splunk, check for log forwarding errors:")),(0,p.mdx)("pre",null,(0,p.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding errors\n")),(0,p.mdx)("h2",{id:"next-steps"},"Next steps"),(0,p.mdx)("p",null,"If you are unable to set up log forwarding using these procedures, please visit ",(0,p.mdx)("a",{parentName:"p",href:"https://experienceleaguecommunities.adobe.com/t5/app-builder/ct-p/adobe-app-builder"},"Adobe Experience Leage App Builder Community")," for support."),(0,p.mdx)("p",null,"Proceed to ",(0,p.mdx)("a",{parentName:"p",href:"splunk_enterprise.md"},"Forwarding logs to Splunk Enterprise"),"."),(0,p.mdx)("p",null,"Return to ",(0,p.mdx)("a",{parentName:"p",href:"logging.md"},"Managing Application Logs"),"."),(0,p.mdx)("p",null,"Return to ",(0,p.mdx)("a",{parentName:"p",href:"../../index.md"},"Guides Index"),"."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-builder-guides-application-logging-splunk-cloud-md-4c24bc75122a763a12b2.js.map