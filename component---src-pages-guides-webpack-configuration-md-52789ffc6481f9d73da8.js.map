{"version":3,"sources":["webpack://project-firefly/./src/pages/guides/webpack-configuration.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-guides-webpack-configuration-md-52789ffc6481f9d73da8.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/project-firefly/project-firefly/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"webpack-configuration\"\n    }}>{`Webpack Configuration`}</h1>\n    <h2 {...{\n      \"id\": \"overview\"\n    }}>{`Overview`}</h2>\n    <p>{`App Builder bundles Runtime action code using Webpack. Users can specify a Webpack configuration for an individual action, a set of actions,\nor an entire project. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://webpack.js.org/configuration/#options\"\n      }}>{`here`}</a>{` for Webpack configuration options. `}</p>\n    <h2 {...{\n      \"id\": \"configuration-file\"\n    }}>{`Configuration File`}</h2>\n    <p>{`When Runtime action code is bundled during `}<inlineCode parentName=\"p\">{`aio app build|run|deploy`}</inlineCode>{` the action directory is searched for a webpack config file named `}<inlineCode parentName=\"p\">{`*webpack-config.js`}</inlineCode>{`. The search is done first in the directory of the action being built, then the parent directory, up to the project root.`}</p>\n    <p>{`If you want to specify a Webpack configuration for a single action, place the `}<inlineCode parentName=\"p\">{`*webpack-config.js`}</inlineCode>{` file in the action folder. `}</p>\n    <p>{`If you want to specify a Webpack configuration for a set of actions, place the `}<inlineCode parentName=\"p\">{`*webpack-config.js`}</inlineCode>{` file in the parent directory of your action\nfolders. `}</p>\n    <p>{`If you want to specify a Webpack configuration for an entire project, place the `}<inlineCode parentName=\"p\">{`*webpack-config.js`}</inlineCode>{` file in the root directory of your project. `}</p>\n    <h2 {...{\n      \"id\": \"configuration-types\"\n    }}>{`Configuration Types`}</h2>\n    <p>{`App Builder supports exporting the following configuration types in `}<inlineCode parentName=\"p\">{`*webpack-config.js`}</inlineCode>{`. `}</p>\n    <h3 {...{\n      \"id\": \"object\"\n    }}>{`Object`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = { \n  mode: 'development' \n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"function-that-returns-an-object\"\n    }}>{`Function that returns an object`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = (env) => ({\n  mode: 'development'\n})\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"function-that-returns-an-array-of-objects\"\n    }}>{`Function that returns an array of objects`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = (env) => ([\n  {\n    mode: 'development' \n  },\n  {\n    mode: 'production'\n  }\n])\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"async-function-that-returns-an-object\"\n    }}>{`Async function that returns an object`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = async (env) => ({\n  mode: 'development'\n})\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"async-function-that-returns-an-array-of-objects\"\n    }}>{`Async function that returns an array of objects`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = async (env) => ([\n  {\n    mode: 'development' \n  },\n  {\n    mode: 'production'\n  }\n])\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"array-of-objects\"\n    }}>{`Array of objects`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = [\n  {\n    mode: 'development'\n  },\n  {\n    mode: 'production'\n  }\n]\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"array-of-functions-that-return-objects\"\n    }}>{`Array of functions that return objects`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = [\n  (env) => ({\n    mode: 'development'\n  }),\n  (env) => ({\n    mode: 'production'\n  })\n]\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"array-of-async-functions-that-return-objects\"\n    }}>{`Array of async functions that return objects`}</h3>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = [\n  async (env) => ({\n    mode: 'development'\n  }),\n  async (env) => ({\n    mode: 'production'\n  })\n]\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"configuration\"\n    }}>{`Configuration`}</h2>\n    <h3 {...{\n      \"id\": \"overview-1\"\n    }}>{`Overview`}</h3>\n    <p>{`Assuming `}<inlineCode parentName=\"p\">{`config`}</inlineCode>{` contains your Webpack configuration: `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n  mode: config.mode || 'production', \n  optimization: {\n    minimize: config.optimization.minimize || false\n  },\n  output: { \n    libraryTarget: config.output.libraryTarget || 'commonjs2',\n    path: './dist/\\${actionPath}/\\${actionName}-temp/' // Cannot change \n    fileName: \\`\\${output.path}/index.js\\` // Cannot change \n  },\n  target: 'node' // Cannot change,\n  entry: [\n    <path to the action>, \n    ...config.entry\n  ],\n  resolve: { \n    extensions: [\n      '.js', \n      '.json', \n      ...config.extensions\n    ],\n    mainFields: [ \n      'main',\n      ...config.mainFields\n    ]\n  },\n  plugins: [\n    new DefaultPlugin({\n      WEBPACK_ACTION_BUILD: 'true', \n      \\`process.env.AIO_CLI_ENV\\`: \\${cliEnv}\n    }),\n    ...config.plugins\n  ]\n  \n  // ... all other Webpack configuration options are valid\n\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"base-options\"\n    }}>{`Base Options`}</h3>\n    <p>{`App Builder starts off with the following Webpack configuration options, any additional values will be added on for these fields: `}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`entry`}</inlineCode>{` - Will always contain the path to the action, additional paths identified in your configuration file will be added on.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`resolve.extensions`}</inlineCode>{` - Will always contain `}<inlineCode parentName=\"li\">{`.js`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`.json`}</inlineCode>{`, additional extensions identified in your configuration file will be added on.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`resolve.mainFields`}</inlineCode>{` - Will always contain `}<inlineCode parentName=\"li\">{`main`}</inlineCode>{`, additional main fields identified in your configuration file will be added on.\n`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"defaults\"\n    }}>{`Defaults`}</h3>\n    <p>{`App Builder defaults to the following Webpack configuration options if they are not present in your configuration file: `}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`output.libraryTarget`}</inlineCode>{` - Will default to `}<inlineCode parentName=\"li\">{`commonjs2`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`mode`}</inlineCode>{` - Will default to `}<inlineCode parentName=\"li\">{`production`}</inlineCode>{`. `}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`optimization.minimize`}</inlineCode>{` - Will default to `}<inlineCode parentName=\"li\">{`false`}</inlineCode>{`.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"immutable-options\"\n    }}>{`Immutable Options`}</h3>\n    <p>{`App Builder does not allow changing of the following Webpack configuration options. These fields will be ignored if present in your configuration file: `}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`target`}</inlineCode>{` - This must be `}<inlineCode parentName=\"li\">{`node`}</inlineCode>{`. I/O Runtime only supports Node.js as a runtime. `}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`output.path`}</inlineCode>{` - Will always be `}<inlineCode parentName=\"li\">{`./dist/\\${actionPath}/\\${actionName}-temp/`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`output.filename`}</inlineCode>{` - Will always be `}<inlineCode parentName=\"li\">{`\\${output.path}/index.js`}</inlineCode>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`Note: If supplying multiple configurations, this is true for the first configuration. For all subsequent configurations, it will be\n`}<inlineCode parentName=\"li\">{`\\${output.path}/index.[hashname].js`}</inlineCode>{`.  `}</li>\n        </ul>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"environment-variables\"\n    }}>{`Environment Variables`}</h2>\n    <p>{`If you have chosen to export a function, an async function, or an array of functions from your Webpack configuration file, App Builder will pass the environment to these functions. You can use this, for instance, to make decisions about bundling based on the environment. `}</p>\n    <p>{`Example: If you exported an environment variable called `}<inlineCode parentName=\"p\">{`MODE`}</inlineCode>{` before building your application, you can use this in your Webpack configuration file: `}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`module.exports = (env) => ({\n  mode: env.FEATURE_FLAG_PIRATES_BOUNTY ? 'production' : 'development'\n})\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}