"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[6324],{12163:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return l},default:function(){return d}});var i=t(58168),n=t(80045),r=(t(88763),t(15680)),p=t(83407);const s=["components"],l={},o={_frontmatter:l},c=p.A;function d(e){let{components:a}=e,t=(0,n.A)(e,s);return(0,r.mdx)(c,(0,i.A)({},o,t,{components:a,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"lesson-2-set-up-alarm-feed-with-trigger-and-rule"},"Lesson 2: Set up Alarm Feed with Trigger and Rule"),(0,r.mdx)("p",null,"Let's first try the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/whisk.system/alarms/interval")," feed of the OpenWhisk Alarm Package to ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/apache/openwhisk-package-alarms#firing-a-trigger-event-periodically-on-an-interval-based-schedule"},"fire trigger events on an interval base schedule"),". To see the effect instantly, we will make it run every minute. You will need a ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/apache/openwhisk/blob/master/docs/triggers_rules.md#creating-triggers"},"trigger")," set up with the ",(0,r.mdx)("inlineCode",{parentName:"p"},"/whisk.system/alarms/interval")," feed, and a ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/apache/openwhisk/blob/master/docs/triggers_rules.md#using-rules"},"rule")," to wire this trigger to the ",(0,r.mdx)("inlineCode",{parentName:"p"},"generic")," action created earlier."),(0,r.mdx)("p",null,"The only required param for the ",(0,r.mdx)("inlineCode",{parentName:"p"},"interval")," feed is ",(0,r.mdx)("inlineCode",{parentName:"p"},"minutes"),", which is an integer representing the length of the interval (in minutes) between trigger fires. Optional params are ",(0,r.mdx)("inlineCode",{parentName:"p"},"trigger_payload"),", ",(0,r.mdx)("inlineCode",{parentName:"p"},"startDate")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"stopDate"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-yaml"},"application:\n  actions: actions\n  web: web-src\n  runtimeManifest:\n    packages:\n      my-app:\n        license: Apache-2.0\n        actions:\n          generic:\n            function: actions/generic/index.js\n            web: 'yes'\n            runtime: 'nodejs:14'\n            inputs:\n              LOG_LEVEL: debug\n            annotations:\n              final: true\n        triggers:\n          everyMin:\n            feed: /whisk.system/alarms/interval\n            inputs: \n              minutes: 1\n        rules:\n          everyMinRule:\n            trigger: everyMin\n            action: generic\n")),(0,r.mdx)("p",null,"To test the trigger schedule, simply deploy the app again with ",(0,r.mdx)("inlineCode",{parentName:"p"},"aio app deploy"),", and observe that the action is invoked after 1 - 2 minutes with ",(0,r.mdx)("inlineCode",{parentName:"p"},"aio rt activation list"),"."),(0,r.mdx)("p",null,(0,r.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,r.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"9.0625%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,r.mdx)("picture",{parentName:"span"},"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/5530d/activation-list.webp 320w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/0c8fb/activation-list.webp 640w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/94b1e/activation-list.webp 1280w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/0b34d/activation-list.webp 1920w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/12009/activation-list.webp 2496w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,r.mdx)("source",{parentName:"picture",srcSet:["/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/dd4a7/activation-list.png 320w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/0f09e/activation-list.png 640w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/bbbf7/activation-list.png 1280w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/ac7a9/activation-list.png 1920w","/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/07035/activation-list.png 2496w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,r.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/app-builder/static/77a6228fe14aa96691ba52eacdce6f58/bbbf7/activation-list.png",alt:"activation-list",title:"activation-list",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-cron-jobs-lesson-2-md-85e0dda5abf8f9f5aa23.js.map