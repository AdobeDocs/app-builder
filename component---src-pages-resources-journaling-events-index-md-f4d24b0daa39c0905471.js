"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[4623],{82399:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return l},default:function(){return p}});var o=n(58168),a=n(80045),r=(n(88763),n(15680)),s=n(83407);const i=["components"],l={},u={_frontmatter:l},d=s.A;function p(e){let{components:t}=e,n=(0,a.A)(e,i);return(0,r.mdx)(d,(0,o.A)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"consume-events-using-the-journaling-api"},"Consume Events Using the Journaling API"),(0,r.mdx)("p",null,"This Code Lab will guide you through creating cron jobs in an App Builder application to consume events using the Journaling API."),(0,r.mdx)("h2",{id:"user-story"},"User story"),(0,r.mdx)("p",null,"There is a class of App Builder apps for which customers want guarantees that I/O Events will be processed without losing any, for example during a surge of events. Without processing guarantees, a Runtime webhook would return a 429 response when it passed its concurrency limit, causing the webhook to be marked unreachable and ending delivery of events. The Journaling API of custom events resolves this situation. "),(0,r.mdx)("h2",{id:"solution"},"Solution"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Use the ",(0,r.mdx)("a",{parentName:"li",href:"https://developer.adobe.com/events/docs/guides/api/journaling_api/"},"Journaling API")," to retrieve events instead of relying on the webhook approach."),(0,r.mdx)("li",{parentName:"ul"},"Use a Runtime action that uses the ",(0,r.mdx)("a",{parentName:"li",href:"../cron-jobs/index.md"},"Alarm package")," to read the events every X minutes."),(0,r.mdx)("li",{parentName:"ul"},"The alarm action stores the events in the App Builder storage ",(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-state"},"aio-lib-state")),(0,r.mdx)("li",{parentName:"ul"},"Record an index of events in storage so that if the action fails, the next invocation will retrieve from the same index, and no events will be lost.")),(0,r.mdx)("p",null,"This Code Lab provides an end-to-end solution that demonstrates how to use the Journaling API to consume events. It includes: "),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Event provider")," to generate events automatically and send them to the Journaling API.  If you already have an event provider, you can skip this step."),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"Event consumer"),", the most important demonstration in this Code Lab. We will create another App Builder headless app to create cron jobs with alarms, and set up recurring jobs to pull from the Journaling API every x mins and write into App Builder storage.")),(0,r.mdx)("p",null,"Event provider and event consumer both need to be deployed as App Builder apps under different namespaces to endsure end-to-end workflow.\nIf you don't have them already, create two projects at Console following the steps detailed in ",(0,r.mdx)("a",{parentName:"p",href:"../../get_started/app_builder_get_started/first_app.md"},"Creating your First App Builder Application"),"."),(0,r.mdx)("p",null,"When they are successfully set up, you should be able to see your event consumer periodically pull events from the Journaling API and write them into storage.\nFor your convenience, there is a complete solution of this Code Lab ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-samples-journaling-events"},"here"),"."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-resources-journaling-events-index-md-f4d24b0daa39c0905471.js.map