"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[774],{96880:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return d},default:function(){return m}});var n=a(58168),l=a(80045),i=(a(88763),a(15680)),o=a(83407);const r=["components"],d={},s={_frontmatter:d},p=o.A;function m(e){let{components:t}=e,a=(0,l.A)(e,r);return(0,i.mdx)(p,(0,n.A)({},s,a,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"setting-response-headers"},"Setting Response Headers"),(0,i.mdx)("p",null,"For applications with UI, static assets such as HTML, Javascript, css, and images are served by the Content Content Delivery Network through the ",(0,i.mdx)("inlineCode",{parentName:"p"},"adobeio-static.net")," domain. App Builder has supported setting response headers for this static content since aio-cli version 9.3.0."),(0,i.mdx)("p",null,"This feature applies to any App Builder applications with UI, and is helpful for use cases such as:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Setting ",(0,i.mdx)("inlineCode",{parentName:"li"},"CORS")," Headers to enforce access policies"),(0,i.mdx)("li",{parentName:"ul"},"Enabling ",(0,i.mdx)("inlineCode",{parentName:"li"},"Content Security Policy")," for assets"),(0,i.mdx)("li",{parentName:"ul"},"Adding any ",(0,i.mdx)("inlineCode",{parentName:"li"},"custom headers")," required by the application UI")),(0,i.mdx)("h2",{id:"rules"},"Rules"),(0,i.mdx)("p",null,"App Builder Developers can now set response headers in the application manifest file - either ",(0,i.mdx)("inlineCode",{parentName:"p"},"ext.config.yaml")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," - during application development."),(0,i.mdx)("p",null,"The manifest lets headers be set as rules that can select or static assets or paths, or all static assets within the application."),(0,i.mdx)("p",null,"The rules are:"),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null},"Rule"),(0,i.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"/*"),(0,i.mdx)("td",{parentName:"tr",align:null},"Include all static content")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"/","<","folder name",">","/*"),(0,i.mdx)("td",{parentName:"tr",align:null},"Include all files within the named folder")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"*",".html or ","*",".js etc."),(0,i.mdx)("td",{parentName:"tr",align:null},"Include files based on their file extension")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"/file or /","<","folder name",">","/file"),(0,i.mdx)("td",{parentName:"tr",align:null},"Include the named file")))),(0,i.mdx)("p",null,"Rules are applied in the order specified in the manifest. For example, rules placed after a given rule can override the previous rule if both apply to the same file."),(0,i.mdx)("h2",{id:"example-usage"},"Example usage"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-yaml"},"application:\n  actions: actions\n  web:\n    src: web-src\n    response-headers:\n      /*: # add headers to all content\n        X-custom-header: generic header\n      /secure-dir/*: # specific folder\n        Content-security-policy: default-src 'self'\n      /widgets/*.html: # add headers to all html content\n        X-custom-header: widget specific header\n        Content-security-policy: default-src 'self'\n      /lib/sample.js: # add headers to specific ile\n        Content-security-policy: default-src 'self' example.com *.example.com\n")),(0,i.mdx)("p",null,"Once headers are added, they can be deployed with the app using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app:deploy")," command. Note that the paths specified in rules are relative to the distributable folder created after the application build, and not to the application root."),(0,i.mdx)("h2",{id:"opting-out-of-default-response-headers"},"Opting Out of Default Response Headers"),(0,i.mdx)("p",null,"By default, App Builder may set certain response headers automatically for your web actions. If you want to take full control and override all default response headers with your own custom options, you must explicitly opt out of the defaults."),(0,i.mdx)("p",null,"To do this, update your web action with the ",(0,i.mdx)("inlineCode",{parentName:"p"},"web-custom-options")," annotation set to ",(0,i.mdx)("inlineCode",{parentName:"p"},"true")," using the CLI:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-bash"},"aio app action update <your-action-name> --web true -a web-custom-options true\n")),(0,i.mdx)("p",null,"Replace ",(0,i.mdx)("inlineCode",{parentName:"p"},"<your-action-name>")," with the name of your web action. This command ensures that only the response headers you define (for example, in your manifest or action code) will be applied, and no additional default headers will be set by App Builder."),(0,i.mdx)("p",null,"This is especially important if you require strict control over CORS, security, or other HTTP headers for your application's endpoints."),(0,i.mdx)("h2",{id:"disallowed-headers"},"Disallowed headers"),(0,i.mdx)("p",null,"Developers may set any HTTP or custom response headers except those in the list below. If the listed headers are specified in the manifest, they will be ignored and not included in the response."),(0,i.mdx)("p",null,"Listed headers are ignored because they are either meant for internal use or are CDN-specific headers that should not be overridden."),(0,i.mdx)("ol",null,(0,i.mdx)("li",{parentName:"ol"},"accept-ranges"),(0,i.mdx)("li",{parentName:"ol"},"age"),(0,i.mdx)("li",{parentName:"ol"},"allow"),(0,i.mdx)("li",{parentName:"ol"},"alt-svc"),(0,i.mdx)("li",{parentName:"ol"},"cache-control"),(0,i.mdx)("li",{parentName:"ol"},"connection"),(0,i.mdx)("li",{parentName:"ol"},"content-length"),(0,i.mdx)("li",{parentName:"ol"},"content-type"),(0,i.mdx)("li",{parentName:"ol"},"content-disposition"),(0,i.mdx)("li",{parentName:"ol"},"content-encoding"),(0,i.mdx)("li",{parentName:"ol"},"content-language"),(0,i.mdx)("li",{parentName:"ol"},"content-length"),(0,i.mdx)("li",{parentName:"ol"},"date"),(0,i.mdx)("li",{parentName:"ol"},"etag"),(0,i.mdx)("li",{parentName:"ol"},"expires"),(0,i.mdx)("li",{parentName:"ol"},"last-modified"),(0,i.mdx)("li",{parentName:"ol"},"location"),(0,i.mdx)("li",{parentName:"ol"},"server"),(0,i.mdx)("li",{parentName:"ol"},"trailer"),(0,i.mdx)("li",{parentName:"ol"},"transfer-encoding"),(0,i.mdx)("li",{parentName:"ol"},"upgrade"),(0,i.mdx)("li",{parentName:"ol"},"x-cache")),(0,i.mdx)("h2",{id:"next-steps"},"Next steps"),(0,i.mdx)("p",null,"This concludes the Deployment section."),(0,i.mdx)("p",null,"Return to ",(0,i.mdx)("a",{parentName:"p",href:"deployment.md"},"Deployment Overview"),"."),(0,i.mdx)("p",null,"Return to the ",(0,i.mdx)("a",{parentName:"p",href:"../../index.md"},"Guides Index"),"."))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-builder-guides-deployment-setting-response-headers-md-9eedcf49de759e349905.js.map