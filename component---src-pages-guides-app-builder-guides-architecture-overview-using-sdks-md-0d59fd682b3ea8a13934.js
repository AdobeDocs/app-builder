"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[4211],{72671:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return m},default:function(){return l}});var t=n(58168),i=n(80045),r=(n(88763),n(15680)),o=n(83407);const d=["components"],m={},p={_frontmatter:m},s=o.A;function l(e){let{components:a}=e,n=(0,i.A)(e,d);return(0,r.mdx)(s,(0,t.A)({},p,n,{components:a,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"using-client-sdks-for-accessing-adobe-apis"},"Using Client SDKs for Accessing Adobe APIs"),(0,r.mdx)("p",null,"To simplify interactions with Adobe APIs, we have created a number of libraries for Adobe Experience Cloud solution APIs. These libraries are npm modules that provide JavaScript abstractions on top of Adobe product APIs. "),(0,r.mdx)("p",null,"You can try them out directly at:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-analytics"},"Adobe Analytics 2.0 Library")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-audience-manager-cd"},"Adobe Audience Manager Customer Data")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-campaign-standard"},"Adobe Campaign Standard Library")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-customer-profile"},"Adobe Experience Platform Real-Time Customer Profile")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-target"},"Adobe Target Library"))),(0,r.mdx)("p",null,"You can also get started and generate project scaffolding automatically through the CLI, using the command ",(0,r.mdx)("inlineCode",{parentName:"p"},"aio app init")," and selecting one of the templates. "),(0,r.mdx)("p",null,"The current implementation focuses on API wrapping. We expect to add business abstraction layers in the future."),(0,r.mdx)("h2",{id:"client-sdk-initialization"},"Client SDK Initialization"),(0,r.mdx)("p",null,"To initialize the client SDK, provide the API key and access token as mandatory parameters. APIs may also require:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("strong",{parentName:"p"},"Tenant name"),": Analytics, Campaign Standard, Target")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("strong",{parentName:"p"},"Organization ID"),": Audience Manager")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("p",{parentName:"li"},(0,r.mdx)("strong",{parentName:"p"},"Both"),": AEP Customer Profile"))),(0,r.mdx)("p",null,"Here is an example initialization for AEP Customer Profile:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"const client = await CustomerProfile.init(params.tenant, orgId, params.apiKey, token)\n")),(0,r.mdx)("p",null,"Among the parameters, ",(0,r.mdx)("inlineCode",{parentName:"p"},"orgId")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"token")," can be obtained from the request headers as described in ",(0,r.mdx)("a",{parentName:"p",href:"../security/index.md"},"Security Overview"),". For ",(0,r.mdx)("inlineCode",{parentName:"p"},"token"),", we provide the ",(0,r.mdx)("inlineCode",{parentName:"p"},"getBearerToken(params)"),"method in the auto-generated utilities under ",(0,r.mdx)("inlineCode",{parentName:"p"},"actions/utils.js"),":"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"const token = getBearerToken(params)\nconst orgId = params.__ow_headers['x-gw-ims-org-id']\n")),(0,r.mdx)("p",null,"The remaining parameters, ",(0,r.mdx)("inlineCode",{parentName:"p"},"tenant")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"apiKey"),", must be passed as default parameters as detailed in ",(0,r.mdx)("a",{parentName:"p",href:"../application_state.md"},"Application State"),". The real values would be set as environment variables in the ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," file, mapped to the action default parameters in the ",(0,r.mdx)("inlineCode",{parentName:"p"},"manifest.yml")," file. Here are sample snippets taken from these files:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"# in .env\nSERVICE_API_KEY=your_api_key\nCUSTOMER_PROFILE_TENANT=your_tenant_name\n")),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-yaml"},"# in manifest.yml\ncustomer-profile:\n  function: actions/customer-profile/index.js\n  web: 'yes'\n  runtime: 'nodejs:12'\n  inputs:\n    LOG_LEVEL: debug\n    tenant: $CUSTOMER_PROFILE_TENANT\n    apiKey: $SERVICE_API_KEY\n  annotations:\n    require-adobe-auth: true\n    final: true\n")),(0,r.mdx)("p",null,"Note that most of these steps are already taken care of after actions are created from the app template using ",(0,r.mdx)("inlineCode",{parentName:"p"},"aio app init")," or ",(0,r.mdx)("inlineCode",{parentName:"p"},"aio app add action")," commands, assuming that your project is properly set up with the relevant API services. You need only set the value of tenant if it is required, and customize the action code for your needs."),(0,r.mdx)("h2",{id:"adobe-analytics-api-14"},"Adobe Analytics API 1.4"),(0,r.mdx)("p",null,"While many features of Adobe Analytics API have been ",(0,r.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/analytics-apis/docs/2.0/#!AdobeDocs/analytics-2.0-apis/master/migration-guide.md"},"migrated to the new 2.0 APIs"),", a few, including data sources, insertion, and real-time data, are available in 1.4 APIs only. In those cases, simply select the ",(0,r.mdx)("inlineCode",{parentName:"p"},"Generic")," template for your action, and use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"node-fetch")," module to make an HTTP request to the API endpoint directly, as shown in the boilerplate code. For reference, please see ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/AdobeDocs/adobeio-samples-firefly-basics/blob/master/actions/analytics14/index.js"},"our example code snippet to retrieve real-time report data"),"."),(0,r.mdx)("h2",{id:"next-steps"},"Next steps"),(0,r.mdx)("p",null,"Continue to ",(0,r.mdx)("a",{parentName:"p",href:"app_hooks.md"},"App Builder Application Tooling Lifecycle Event Hooks"),"."),(0,r.mdx)("p",null,"Return to ",(0,r.mdx)("a",{parentName:"p",href:"../../../guides/index.md"},"Guides Index"),"."))}l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-builder-guides-architecture-overview-using-sdks-md-0d59fd682b3ea8a13934.js.map