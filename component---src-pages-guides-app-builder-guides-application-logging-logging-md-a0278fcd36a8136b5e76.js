"use strict";(self.webpackChunkadobe_developer_app_builder=self.webpackChunkadobe_developer_app_builder||[]).push([[4645],{72649:function(e,a,n){n.r(a),n.d(a,{_frontmatter:function(){return d},default:function(){return g}});var t=n(58168),o=n(80045),i=(n(88763),n(15680)),r=n(83407);const l=["components"],d={},p=(m="InlineAlert",function(e){return console.warn("Component "+m+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var m;const s={_frontmatter:d},u=r.A;function g(e){let{components:a}=e,n=(0,o.A)(e,l);return(0,i.mdx)(u,(0,t.A)({},s,n,{components:a,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"managing-application-logs"},"Managing Application Logs"),(0,i.mdx)("p",null,"Logging is one of the most important tools in a Developer's tool kit. Application logs allow Developers to debug applications in development and monitor them in production. The App Builder ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-sdk"},"SDK")," and ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI")," provide significant capabilities to facilitate application logging from code, and viewing or forwarding them."),(0,i.mdx)("h2",{id:"logging-with-app-builder-sdk"},"Logging with App Builder SDK"),(0,i.mdx)("p",null,"The App Builder ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-sdk"},"SDK")," provides a ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-core-logging"},"core logging library")," that defines an ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-core-logging/blob/master/doc/api.md"},"API")," on top of the popular ",(0,i.mdx)("a",{parentName:"p",href:"https://www.npmjs.com/package/winston"},"WinstonJS")," and ",(0,i.mdx)("a",{parentName:"p",href:"https://www.npmjs.com/package/debug"},"Debug")," npm packages. The core logging library can be used in a Runtime action or in other libraries."),(0,i.mdx)("p",null,"The App Builder core logging library can be also used with the App Builder ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-lib-core-errors"},"core errors library"),". The core errors library streamlines error management across the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-sdk"},"AIO SDK")," and App Builder applications. When the core errors library is used in conjunction with the core logging library, error log messages output specific error codes, as defined by each App Builder ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-sdk"},"SDK"),", that further aid debugging."),(0,i.mdx)("p",null,"Both the core logging library and the core errors library can be used directly in an App Builder application, a Runtime action, and other libraries. For example, both libraries are used in:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"The App Builder ",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-sdk"},"SDK")," itself"),(0,i.mdx)("li",{parentName:"ul"},"Higher-level SDK libraries such as the ",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-lib-customer-profile"},"Real-time Customer Profile")," SDK library"),(0,i.mdx)("li",{parentName:"ul"},"Shared Runtime actions such as the ",(0,i.mdx)("a",{parentName:"li",href:"https://github.com/adobe/aio-tvm"},"Token Vending Machine"))),(0,i.mdx)(p,{slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"When a new App Builder application is bootstrapped from the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"AIO CLI")," using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app init")," command, the ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/generator-aio-app"},"generated boilerplate action code")," integrates with both the core and errors logging libraries by default."),(0,i.mdx)("h2",{id:"accessing-logs-with-app-builder-cli"},"Accessing logs with App Builder CLI"),(0,i.mdx)("p",null,"App Builder ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli"},"CLI")," exposes application logs to Developers at different levels:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"At an App Builder application level, using the ",(0,i.mdx)("inlineCode",{parentName:"li"},"aio app")," plugin"),(0,i.mdx)("li",{parentName:"ul"},"At a Runtime action level, using the ",(0,i.mdx)("inlineCode",{parentName:"li"},"aio runtime")," plugin")),(0,i.mdx)("h3",{id:"app-builder-app-plugin"},"App Builder app plugin"),(0,i.mdx)("p",null,"The AIO CLI ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli-plugin-app"},"App plugin")," provides the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app logs")," command, which fetches the logs for an App Builder application deployed to the App Builder Workspace configured in the current working folder. The command:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Accepts an integer argument with the ",(0,i.mdx)("inlineCode",{parentName:"li"},"--limit")," flag that allows fetching logs from the last ",(0,i.mdx)("inlineCode",{parentName:"li"},"n")," Runtime activations"),(0,i.mdx)("li",{parentName:"ul"},"Accepts an action name with the ",(0,i.mdx)("inlineCode",{parentName:"li"},"--action")," flag that allows fetching logs from a particular action within the App Builder application"),(0,i.mdx)("li",{parentName:"ul"},"Allows a ",(0,i.mdx)("inlineCode",{parentName:"li"},"--tail")," or ",(0,i.mdx)("inlineCode",{parentName:"li"},"--watch")," flag that continuously fetches logs as they appear")),(0,i.mdx)("p",null,"To see more command options, run ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app logs --help")," on your terminal."),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app logs")," command can be used by developers or by scripts running in a ",(0,i.mdx)("a",{parentName:"p",href:"../deployment/cicd_for_app_builder_apps.md"},"CI/CD pipeline"),". The command can also be used for App Builder Applications deployed on Runtime, or running locally through the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app run --local")," command as discussed in the ",(0,i.mdx)("a",{parentName:"p",href:"../deployment/deployment.md"},"Deployment Guide"),"."),(0,i.mdx)("h3",{id:"runtime-plugin"},"Runtime plugin"),(0,i.mdx)("p",null,"The AIO CLI ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli-plugin-runtime"},"Runtime plugin")," operates at the level of a Runtime action. When a ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli-plugin-runtime#aio-runtime-action-create-actionname-actionpath"},"Runtime action is invoked"),", the corresponding ",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/adobe/aio-cli-plugin-runtime#aio-runtime-activation-logs-activationid"},"activation's logs")," can be fetched using the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio runtime logs <activation_id>")," command."),(0,i.mdx)("p",null,"This command also offers options to ",(0,i.mdx)("inlineCode",{parentName:"p"},"--watch")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"--tail")," the logs, and other options you can review by running ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio runtime logs --help"),". "),(0,i.mdx)("p",null,"As with ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app logs"),", the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio runtime logs")," command can be used by Developers or by scripts running in a ",(0,i.mdx)("a",{parentName:"p",href:"../deployment/deployment.md"},"Deployment Guide"),". The command can also be used for App Builder applications deployed on Runtime or  running locally through the ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app run --local")," command as discussed in the ",(0,i.mdx)("a",{parentName:"p",href:"../deployment/deployment.md"},"Deployment Guide"),"."),(0,i.mdx)("h2",{id:"forwarding-application-logs"},"Forwarding Application logs"),(0,i.mdx)("p",null,"In addition to viewing application logs using the AIO CLI, Developers can configure App Builder applications to forward all application logs to a customer-owned log management solution. Forwarding logs has several benefits over retrieving them through the AIO CLI, especially for applications deployed in Production or Staging environments. "),(0,i.mdx)("p",null,"Supported log management solutions include:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},"Adobe I/O Runtime (default)"),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"splunk_cloud.md"},"Splunk Cloud")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"splunk_enterprise.md"},"Splunk Enterprise")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"azure_log_analytics.md"},"Azure Log Analytics")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"new_relic.md"},"New Relic"))),(0,i.mdx)("p",null,"Follow these links to see how to set up log forwarding using each solution."),(0,i.mdx)("h3",{id:"when-to-use-log-forwarding"},"When to use log forwarding"),(0,i.mdx)("p",null,"This table compares storing application logs in Adobe I/O Runtime and forwarding them to a log management solution:"),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null}),(0,i.mdx)("th",{parentName:"tr",align:null},"Storing logs in I/O Runtime"),(0,i.mdx)("th",{parentName:"tr",align:null},"Forwarding logs"))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Setup"),(0,i.mdx)("td",{parentName:"tr",align:null},"Workspaces default to storing logs in Runtime. Included in App Builder SKU."),(0,i.mdx)("td",{parentName:"tr",align:null},"Log Forwarding must be configured per App Builder application workspace. Requires a separate log management solution.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Use cases"),(0,i.mdx)("td",{parentName:"tr",align:null},"Good for local development, or when Developers work in separate workspaces."),(0,i.mdx)("td",{parentName:"tr",align:null},"Ideal for shared environments such as ",(0,i.mdx)("inlineCode",{parentName:"td"},"Stage")," and ",(0,i.mdx)("inlineCode",{parentName:"td"},"Production")," workspaces.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Access"),(0,i.mdx)("td",{parentName:"tr",align:null},"Stores application logs only for failed or asynchronous activations."),(0,i.mdx)("td",{parentName:"tr",align:null},"Allows access to all application logs.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Retrieval"),(0,i.mdx)("td",{parentName:"tr",align:null},"The AIO CLI can be used to fetch logs."),(0,i.mdx)("td",{parentName:"tr",align:null},"Logs must be retrieved logs from the separate log management solution.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Limits"),(0,i.mdx)("td",{parentName:"tr",align:null},"Maximum 10 MB per activation, beyond which I/O Runtime truncates log lines."),(0,i.mdx)("td",{parentName:"tr",align:null},"Maximum 10 MB per activation, beyond which I/O Runtime truncates log lines.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Throttling"),(0,i.mdx)("td",{parentName:"tr",align:null},"The ",(0,i.mdx)("inlineCode",{parentName:"td"},"x-ow-extra-logging")," header directs Adobe I/O Runtime to store all application logs. But it's meant to be used only in local development, and  overuse is throttled at high log volumes."),(0,i.mdx)("td",{parentName:"tr",align:null},"Use of ",(0,i.mdx)("inlineCode",{parentName:"td"},"x-ow-extra-logging")," is unnecessary: logs are forwarded by design.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Retention"),(0,i.mdx)("td",{parentName:"tr",align:null},"Logs are retained for 7 days."),(0,i.mdx)("td",{parentName:"tr",align:null},"Forwarded logs may be retained for any duration specified.")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},"Capabilities"),(0,i.mdx)("td",{parentName:"tr",align:null},"You may view or tail application logs on a per-application or per-activation level using AIO CLI."),(0,i.mdx)("td",{parentName:"tr",align:null},"Most log management solutions support viewing logs, search through unstructured logs, and charting of data extracted from logs. Forwarding logs also allows consolidation and correlation of App Builder logs with the logs from other infrastructure.")))),(0,i.mdx)("h3",{id:"log-forwarding-commands"},"Log forwarding commands"),(0,i.mdx)("h4",{id:"setting-log-forwarding"},"Setting log forwarding"),(0,i.mdx)("p",null,"This command allows you to configure log forwarding for your workspace or reset it to store logs in Adobe I/O Runtime:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"aio app config set log-forwarding\n")),(0,i.mdx)("p",null,"Once a log forwarding configuration is set, it is stored in the ",(0,i.mdx)("inlineCode",{parentName:"p"},".aio")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},".env")," files. Any changes made to the configuration in the ",(0,i.mdx)("inlineCode",{parentName:"p"},".aio")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},".env")," file will be deployed when you run ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app deploy"),"."),(0,i.mdx)("p",null,"Running ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app deploy --no-actions")," or ",(0,i.mdx)("inlineCode",{parentName:"p"},"aio app deploy --no-log-forwarding-update")," skips deployment of these changes."),(0,i.mdx)("p",null,"Please visit the Guide for your log management solution of interest to see how to set up log forwarding."),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"splunk_cloud.md"},"Splunk Cloud")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"splunk_enterprise.md"},"Splunk Enterprise")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"azure_log_analytics.md"},"Azure Log Analytics")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("a",{parentName:"li",href:"new_relic.md"},"New Relic"))),(0,i.mdx)("h4",{id:"viewing-the-current-log-forwarding-configuration"},"Viewing the current log forwarding configuration"),(0,i.mdx)("p",null,"This command displays the current log forwarding configuration for your workspace and compares it to the locally set log forwarding configuration:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding\n")),(0,i.mdx)("p",null,"If log forwarding is not configured for your workspace, Adobe I/O Runtime will be returned by default. Note that for security reasons, Adobe never returns configured secrets from our servers."),(0,i.mdx)("h4",{id:"debugging-log-forwarding"},"Debugging log forwarding"),(0,i.mdx)("p",null,"This command outputs any errors that occurred when application logs were being forwarded to your configured log management solution:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre"},"aio app config get log-forwarding errors\n")),(0,i.mdx)("p",null,"It returns the most recent 10 log forwarding errors for the current log forwarding configuration, to a maximum of 30 days."),(0,i.mdx)("h2",{id:"next-steps"},"Next steps"),(0,i.mdx)("p",null,"Return to ",(0,i.mdx)("a",{parentName:"p",href:"../../index.md"},"Guides Index"),"."),(0,i.mdx)("p",null,"Return to ",(0,i.mdx)("a",{parentName:"p",href:"../../../intro_and_overview/app_builder_overview.md"},"App Builder Overview"),"."))}g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-app-builder-guides-application-logging-logging-md-a0278fcd36a8136b5e76.js.map