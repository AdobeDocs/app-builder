{"version":3,"file":"component---src-pages-resources-customer-dashboard-lesson-2-md-a16990e7e90815f6fb83.js","mappings":"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","sources":["webpack://adobe-developer-app-builder/./src/pages/resources/customer-dashboard/lesson2.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/app-builder/app-builder/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"lesson-2-explore-the-app-builder-app\"\n    }}>{`Lesson 2: Explore the App Builder App`}</h1>\n    <p>{`Within the newly created app, you have seen the `}<inlineCode parentName=\"p\">{`.env`}</inlineCode>{` file with your credentials for running the app. `}</p>\n    <p><inlineCode parentName=\"p\">{`package.json`}</inlineCode>{` is the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.npmjs.com/creating-a-package-json-file\"\n      }}>{`crucial part`}</a>{` of almost every NodeJS project. It contains the list of dependencies, version, reproducible builds, and so on.`}</p>\n    <p><inlineCode parentName=\"p\">{`ext.config.yaml`}</inlineCode>{` in the `}<inlineCode parentName=\"p\">{`src/dx-excshell-1/`}</inlineCode>{` folder is the cockpit of your App Builder app back end. It lists the declaration of serverless actions including name, source files, runtime kind, default parameters, annotations, and so on. You can find the grammar of writing manifest `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apache/openwhisk-wskdeploy/blob/master/docs/programming_guide.md#wskdeploy-utility-by-example\"\n      }}>{`here`}</a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`operations:\n  workerProcess:\n    - type: action\n      impl: dx-asset-compute-worker-1/worker\nhooks:\n  post-app-run: adobe-asset-compute devtool\n  test: adobe-asset-compute test-worker\nactions: actions\nruntimeManifest:\n  packages:\n    dx-asset-compute-worker-1:\n      license: Apache-2.0\n      actions:\n        get-profiles:\n          function: actions/get-profiles/index.js\n          web: 'yes'\n          runtime: 'nodejs:18'\n          inputs:\n              LOG_LEVEL: debug\n              tenant: $CAMPAIGN_STANDARD_TENANT\n              apiKey: $SERVICE_API_KEY\n          annotations:\n            require-adobe-auth: true\n            final: true\n`}</code></pre>\n    <p>{`Your app currently has only one action, `}<inlineCode parentName=\"p\">{`get-profiles`}</inlineCode>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Source code is at `}<inlineCode parentName=\"li\">{`src/dx-excshell-1/actions/get-profiles/index.js`}</inlineCode></li>\n      <li parentName=\"ul\">{`It is a `}<a parentName=\"li\" {...{\n          \"href\": \"../../guides/runtime_guides/creating_actions.md\"\n        }}>{`web action`}</a></li>\n      <li parentName=\"ul\">{`The action will be run in the `}<inlineCode parentName=\"li\">{`nodejs:18`}</inlineCode>{` `}<a parentName=\"li\" {...{\n          \"href\": \"../../guides/runtime_guides/reference_docs/runtimes.md#node-js-v18-14-2\"\n        }}>{`runtime container on I/O Runtime`}</a></li>\n      <li parentName=\"ul\">{`It has some `}<a parentName=\"li\" {...{\n          \"href\": \"../../guides/runtime_guides/creating_actions.md#working-with-parameters\"\n        }}>{`default parameters`}</a>{` such as `}<inlineCode parentName=\"li\">{`LOG_LEVEL`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`tenant`}</inlineCode>{`, `}<inlineCode parentName=\"li\">{`apiKey`}</inlineCode>{`, which are automatically available in the `}<inlineCode parentName=\"li\">{`params`}</inlineCode>{` object of the action without passing it to the action for every invocation. The `}<inlineCode parentName=\"li\">{`final`}</inlineCode>{` annotation set as `}<inlineCode parentName=\"li\">{`true`}</inlineCode>{` reveals that those parameters are immutable.`}</li>\n      <li parentName=\"ul\">{`Setting the `}<inlineCode parentName=\"li\">{`require-adobe-auth`}</inlineCode>{` annotation as `}<inlineCode parentName=\"li\">{`true`}</inlineCode>{` enables this action to be protected by the Adobe IMS user token in the request header. Without it, the action will return a `}<inlineCode parentName=\"li\">{`401 Unauthorized`}</inlineCode>{` error.`}</li>\n    </ul>\n    <p>{`Now let's take a deeper look at the action's source code:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`/**\n * This action gets a list of customer profiles the Adobe Campaign Standard API\n */\n\nconst { Core } = require('@adobe/aio-sdk')\nconst { CampaignStandard } = require('@adobe/aio-sdk')\nconst { errorResponse, getBearerToken, stringParameters, checkMissingRequestInputs } = require('../utils')\n\n// main function that will be executed by Adobe I/O Runtime\nasync function main (params) {\n  // create a Logger\n  const logger = Core.Logger('main', { level: params.LOG_LEVEL || 'info' })\n\n  try {\n    // 'info' is the default level if not set\n    logger.info('Calling the main action')\n\n    // log parameters, only if params.LOG_LEVEL === 'debug'\n    logger.debug(stringParameters(params))\n\n    // check for missing request input parameters and headers\n    const requiredParams = ['apiKey', 'tenant']\n    const errorMessage = checkMissingRequestInputs(params, requiredParams, ['Authorization'])\n    if (errorMessage) {\n      // return and log client errors\n      return errorResponse(400, errorMessage, logger)\n    }\n\n    // extract the user Bearer token from the input request parameters\n    const token = getBearerToken(params)\n\n    // initialize the sdk\n    const campaignClient = await CampaignStandard.init(params.tenant, params.apiKey, token)\n\n    // get profiles from Campaign Standard\n    const profiles = await campaignClient.getAllProfiles()\n    logger.debug('profiles = ' + JSON.stringify(profiles, null, 2))\n    const response = {\n      statusCode: 200,\n      body: profiles\n    }\n\n    // log the response status code\n    logger.info(\\`\\${response.statusCode}: successful request\\`)\n    return response\n  } catch (error) {\n    // log any server errors\n    logger.error(error)\n    // return with 500\n    return errorResponse(500, 'server error', logger)\n  }\n}\n\nexports.main = main\n`}</code></pre>\n    <p>{`Here, the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apache/openwhisk/blob/master/docs/actions-nodejs.md\"\n      }}>{`action`}</a>{` exposes a `}<inlineCode parentName=\"p\">{`main`}</inlineCode>{` function, which accepts a list of parameters from the client. It checks that required parameters for using the Campaign Standard SDK are present in the list, including the `}<inlineCode parentName=\"p\">{`Authorization`}</inlineCode>{` header for authentication against Adobe IMS.`}</p>\n    <p>{`An access token is retrieved to initiate the SDK client instance, which is then used to retrieve the list of customer profiles using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.adobe.com/content/help/en/campaign-standard/using/working-with-apis/managing-profiles/retrieving-profiles.html\"\n      }}>{`getAllProfiles()`}</a>{` function. Finally, the profiles are returned to the client. The entire execution is wrapped within a try-catch block, so errors are handled appropriately.`}</p>\n    <p>{`Next, let's see how the web UI communicates with the back end. All web assets are placed in the `}<inlineCode parentName=\"p\">{`src/dx-excshell-1/web-src`}</inlineCode>{` folder.`}</p>\n    <p>{`Beside a few auto-generated files  useful for running your app on Adobe Experience Cloud (ExC) Shell, `}<inlineCode parentName=\"p\">{`App.js`}</inlineCode>{` is the extension point of your UI.  `}</p>\n    <p>{`By default, it contains three pages: Home and About are just static pages listing reference docs; ActionsForm lists all available back-end actions, allows you to select which action to be invoke, and, when you click the \"invoke\" button, shows the invocation results in the browser console:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`<View gridArea='content' padding='size-200'>\n  <Switch>\n    <Route exact path='/'>\n      <Home></Home>\n    </Route>\n    <Route path='/actions'>\n      <ActionsForm runtime={props.runtime} ims={props.ims} />\n    </Route>\n    <Route path='/about'>\n      <About></About>\n    </Route>\n  </Switch>\n</View>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","_ref","components","props","_objectWithoutProperties","_excluded","mdx","_extends","mdxType","parentName","isMDXComponent"],"sourceRoot":""}